export interface ContentPage {
  id: string;
  section: 'codice' | 'training-hall' | 'trainings' | 'standards';
  title: string;
  slug: string;
  content: string;
  parentId?: string;
  orderIndex: number;
  files: ContentFile[];
  hasExam?: boolean;
  exam?: ExamQuestion[];
  createdAt: string;
  updatedAt: string;
}

export interface ContentFile {
  name: string;
  url: string;
  type: 'document' | 'video' | 'image' | 'link';
}

export interface ExamQuestion {
  id: string;
  question: string;
  options: string[];
  correctAnswer: number;
}

export interface UserProgress {
  userId: string;
  contentId: string;
  completed: boolean;
  examScore?: number;
  examAttempts: number;
  lastAttemptDate?: string;
  completedAt?: string;
}

export interface ExamResult {
  userId: string;
  userName: string;
  contentId: string;
  contentTitle: string;
  score: number;
  totalQuestions: number;
  answers: { questionId: string; userAnswer: number; correct: boolean }[];
  completedAt: string;
}

import { getCodeiceContent } from './arrurru-codice-content';

const STORAGE_KEY = 'arrurru_content';
const PROGRESS_KEY = 'arrurru_progress';
const EXAM_RESULTS_KEY = 'arrurru_exam_results';
const CONTENT_VERSION_KEY = 'arrurru_content_version';
const CURRENT_CONTENT_VERSION = '2.0';

const getInitialContent = (): ContentPage[] => {
  const codicePages = getCodeiceContent();
  return [
    ...codicePages,
    {
      id: '4',
      section: 'training-hall',
      title: 'Модуль 1: Введение в сервис ARRURRU',
      slug: 'module-1-intro',
      content: `# Модуль 1: Введение в сервис ARRURRU

## Цель модуля
Понять основы философии обслуживания и стандарты ARRURRU.

## Темы для изучения
- История и концепция проекта
- Стандарты внешнего вида
- Базовые правила общения с гостями
- Территория и зонирование

## Практика
Прохождение по всем зонам ресторана с управляющим.`,
      orderIndex: 1,
      files: [
        {
          name: 'Основной зал ARRURRU',
          url: 'https://cdn.poehali.dev/projects/a0f1d64c-d8ab-4496-af89-52912fc87ab2/files/77d1d8db-a8db-4fc7-879f-97a47ee5ceb4.jpg',
          type: 'image'
        },
        {
          name: 'Барная зона',
          url: 'https://cdn.poehali.dev/projects/a0f1d64c-d8ab-4496-af89-52912fc87ab2/files/eda07bdf-7d54-457b-a9b9-dac81cf1ab3f.jpg',
          type: 'image'
        }
      ],
      hasExam: true,
      exam: [
        {
          id: 'qth1-1',
          question: 'Какая главная цель модуля "Введение в сервис ARRURRU"?',
          options: [
            'Научиться готовить блюда',
            'Понять основы философии обслуживания ARRURRU',
            'Узнать расписание работы',
            'Познакомиться с коллегами'
          ],
          correctAnswer: 1
        },
        {
          id: 'qth1-2',
          question: 'Что НЕ относится к базовым стандартам внешнего вида?',
          options: [
            'Чистая униформа',
            'Яркий макияж и украшения',
            'Собранные волосы',
            'Ухоженные руки'
          ],
          correctAnswer: 1
        }
      ],
      createdAt: new Date().toISOString(),
      updatedAt: new Date().toISOString()
    },
    {
      id: '7',
      section: 'training-hall',
      title: 'Модуль 2: Система продаж',
      slug: 'module-2-sales',
      content: `# Модуль 2: Система продаж в ARRURRU

## Цель модуля
Освоить техники продаж и увеличения среднего чека.

## Ключевые навыки

### Техника допродажи (Upselling)
- Предлагаем более дорогую позицию
- "Рекомендую попробовать нашу выдержанную версию этого вина"
- "У нас есть премиальный вариант этого блюда с трюфелем"

### Перекрёстные продажи (Cross-selling)
- Предлагаем дополнительные позиции
- К основному блюду — гарнир или соус
- К вину — закуску или десерт

### Правило трёх предложений
1. Первое предложение: что-то новое/сезонное
2. Второе предложение: хит продаж
3. Третье предложение: альтернатива по цене

## Скрипты продаж

### При заказе основного блюда
"К стейку прекрасно подойдёт наш фирменный соус с трюфелем. Дополнить?"

### При заказе вина
"К этому вину я рекомендую заказать сырную тарелку — они идеально сочетаются"

### Завершение трапезы
"Позвольте предложить наш фирменный десерт — шоколадный фондан. Он готовится 15 минут, но того стоит"

## Психология продаж

### Язык выгод
- НЕ: "Хотите десерт?"
- ДА: "У нас невероятный шоколадный фондан, который тает во рту"

### Создание ценности
- Рассказываем историю блюда
- Упоминаем уникальные ингредиенты
- Подчёркиваем мастерство шефа

### Работа с возражениями
- "Я на диете" → "У нас есть лёгкие десерты без сахара"
- "Я уже наелся" → "Тогда можем упаковать с собой"
- "Дорого" → "Это блюдо на двоих, получается очень выгодно"`,
      orderIndex: 2,
      files: [
        {
          name: 'Обучение техникам продаж',
          url: 'https://cdn.poehali.dev/projects/a0f1d64c-d8ab-4496-af89-52912fc87ab2/files/527cd81b-b845-4348-9897-17aa1bbef94e.jpg',
          type: 'image'
        }
      ],
      hasExam: true,
      exam: [
        {
          id: 'qth2-1',
          question: 'Что такое Upselling?',
          options: [
            'Предложение дополнительных позиций',
            'Предложение более дорогой альтернативы',
            'Скидка на второе блюдо',
            'Подарок от заведения'
          ],
          correctAnswer: 1
        },
        {
          id: 'qth2-2',
          question: 'Какой скрипт правильный?',
          options: [
            '"Хотите десерт?"',
            '"У нас есть десерты"',
            '"У нас невероятный шоколадный фондан, который тает во рту"',
            '"Десерт будете?"'
          ],
          correctAnswer: 2
        },
        {
          id: 'qth2-3',
          question: 'Как отвечать на возражение "Я на диете"?',
          options: [
            '"Тогда ничего не будем"',
            '"У нас есть лёгкие десерты без сахара"',
            '"Один раз можно"',
            '"Жаль"'
          ],
          correctAnswer: 1
        }
      ],
      createdAt: new Date().toISOString(),
      updatedAt: new Date().toISOString()
    },
    {
      id: '8',
      section: 'training-hall',
      title: 'Модуль 3: Работа с гостем',
      slug: 'module-3-guest',
      content: `# Модуль 3: Работа с гостем

## Цель модуля
Научиться создавать персонализированный опыт для каждого гостя.

## Типы гостей

### 1. Первый визит
- Особое внимание к деталям
- Подробные объяснения меню
- Рекомендации "хитов"
- Запоминаем предпочтения

### 2. Постоянный гость
- Приветствие по имени
- Помним предыдущие заказы
- "Как обычно?" или предлагаем новинки
- Благодарим за лояльность

### 3. Бизнес-встреча
- Быстрый и незаметный сервис
- Не отвлекаем лишними вопросами
- Приносим счёт заранее
- Тихая атмосфера

### 4. Романтическое свидание
- Уютный столик
- Приглушённый свет
- Тактичный сервис
- Комплименты от заведения

### 5. Семья с детьми
- Детское меню сразу
- Приборы и салфетки в доступе
- Быстрая подача блюд
- Терпение и понимание

## Сложные ситуации

### Гость недоволен блюдом
1. Выслушиваем без перебивания
2. Извиняемся искренне
3. Предлагаем решение:
   - Переделать блюдо
   - Заменить на другое
   - Убрать из счёта
4. Сообщаем управляющему

### Гость спешит
- Сразу уточняем: "Сколько времени у вас есть?"
- Рекомендуем быстрые блюда
- Просим кухню ускориться
- Держим в курсе времени приготовления

### Гость требует скидку
- Спокойно объясняем ценообразование
- Предлагаем альтернативу (менее дорогое блюдо)
- Информируем о программе лояльности
- Зовём управляющего при эскалации

## Магия сервиса

### Предвосхищение желаний
- Видим пустой бокал → подливаем воду
- Гость ищет глазами → подходим: "Чем могу помочь?"
- Холодно в зале → предлагаем плед
- День рождения → комплимент от заведения

### Персонализация
- Запоминаем имена
- Учитываем предпочтения (без льда, без лука)
- Помним аллергии
- Отмечаем особые даты

### Эмоциональный интеллект
- Читаем настроение гостя
- Подстраиваем манеру общения
- Не навязываемся, когда не нужно
- Проявляем эмпатию`,
      orderIndex: 3,
      files: [
        {
          name: 'Работа с гостями',
          url: 'https://cdn.poehali.dev/projects/a0f1d64c-d8ab-4496-af89-52912fc87ab2/files/527cd81b-b845-4348-9897-17aa1bbef94e.jpg',
          type: 'image'
        }
      ],
      hasExam: true,
      exam: [
        {
          id: 'qth3-1',
          question: 'Как работать с гостем на бизнес-встрече?',
          options: [
            'Часто подходить и предлагать блюда',
            'Быстрый и незаметный сервис',
            'Рассказывать истории про блюда',
            'Постоянно спрашивать всё ли в порядке'
          ],
          correctAnswer: 1
        },
        {
          id: 'qth3-2',
          question: 'Что делать, если гость недоволен блюдом?',
          options: [
            'Сказать что это проблема кухни',
            'Выслушать, извиниться, предложить решение',
            'Предложить скидку 10%',
            'Игнорировать'
          ],
          correctAnswer: 1
        },
        {
          id: 'qth3-3',
          question: 'Что относится к "магии сервиса"?',
          options: [
            'Быстрая подача блюд',
            'Предвосхищение желаний гостя',
            'Большие порции',
            'Низкие цены'
          ],
          correctAnswer: 1
        }
      ],
      createdAt: new Date().toISOString(),
      updatedAt: new Date().toISOString()
    },
    {
      id: '9',
      section: 'training-hall',
      title: 'Модуль 4: Командная работа',
      slug: 'module-4-teamwork',
      content: `# Модуль 4: Командная работа

## Цель модуля
Научиться эффективно работать в команде для безупречного сервиса.

## Принципы командной работы

### 1. Взаимопомощь
- Видишь коллегу в цейтноте → помогаешь
- Не делим столы на "мои" и "чужие"
- Подхватываем друг друга автоматически
- "Один за всех, все за одного"

### 2. Коммуникация
- Чёткая передача информации
- Используем единую терминологию
- Сообщаем об изменениях в заказах
- Слушаем активно

### 3. Синхронизация
- Координируем подачу блюд
- Убираем посуду одновременно
- Не мешаем друг другу
- Работаем как единый механизм

## Роли в команде

### Официант
- Работа с гостями
- Приём заказов
- Сервировка и подача
- Контроль чистоты зоны

### Хостес
- Встреча гостей
- Рассадка
- Управление резервами
- Первое впечатление

### Бармен
- Приготовление напитков
- Контроль бара
- Консультации по напиткам
- Поддержка официантов

### Раннер
- Доставка блюд из кухни
- Помощь в сервировке
- Уборка столов
- Поддержка зала

## Коммуникация с кухней

### Правила
- Передаём заказы чётко
- Уточняем время приготовления
- Информируем о спешке гостя
- Сообщаем об аллергиях

### Запрещено
- Кричать или ругаться
- Обвинять в ошибках
- Срывать стресс
- Игнорировать запросы

## Работа в стрессовых ситуациях

### Аншлаг (полная посадка)
- Сохраняем спокойствие
- Помогаем друг другу
- Расставляем приоритеты
- Держим позитивный настрой

### Конфликты в команде
- Решаем после смены
- Не выносим на гостей
- Идём к управляющему
- Ищем конструктив

### Ошибки
- Признаём сразу
- Исправляем вместе
- Учимся на них
- Не повторяем

## Стандарты коммуникации

### Между собой
- Вежливо и уважительно
- "Пожалуйста" и "Спасибо"
- Без мата и грубости
- Конструктивная критика

### На виду у гостей
- Только по делу
- Тихо и незаметно
- Улыбки и позитив
- Профессионализм

## Мотивация команды

- Отмечаем успехи друг друга
- Поддерживаем в трудные моменты
- Делимся опытом
- Растём вместе`,
      orderIndex: 4,
      files: [
        {
          name: 'Командная работа',
          url: 'https://cdn.poehali.dev/projects/a0f1d64c-d8ab-4496-af89-52912fc87ab2/files/cd7321bc-5c60-4e85-ace6-7754a13ea3a1.jpg',
          type: 'image'
        }
      ],
      hasExam: true,
      exam: [
        {
          id: 'qth4-1',
          question: 'Главный принцип взаимопомощи в команде?',
          options: [
            'Каждый отвечает только за свои столы',
            'Помогаем только по просьбе',
            'Подхватываем друг друга автоматически',
            'Помогаем только друзьям'
          ],
          correctAnswer: 2
        },
        {
          id: 'qth4-2',
          question: 'Как вести себя при аншлаге (полная посадка)?',
          options: [
            'Паниковать и жаловаться',
            'Сохранять спокойствие и помогать друг другу',
            'Отказывать новым гостям',
            'Работать только со своими столами'
          ],
          correctAnswer: 1
        },
        {
          id: 'qth4-3',
          question: 'Что делать при конфликте в команде?',
          options: [
            'Выяснять отношения при гостях',
            'Решать после смены, идти к управляющему',
            'Игнорировать коллегу',
            'Жаловаться другим официантам'
          ],
          correctAnswer: 1
        }
      ],
      createdAt: new Date().toISOString(),
      updatedAt: new Date().toISOString()
    },
    {
      id: '5',
      section: 'trainings',
      title: 'Этап 1: Командообразование (1 неполный день)',
      slug: 'training-1-team',
      content: `# Этап 1: Командообразование

## Формат
- **Длительность**: 1 неполный день (4-5 часов)
- **Участники**: Весь персонал ARRURRU (зал + кухня + управление)
- **Формат**: Интерактивные упражнения и практики
- **Место**: Территория ресторана или выездной формат

## Цели тренинга
1. Сплотить команду
2. Создать доверие между сотрудниками разных отделов
3. Понять роль каждого в общем успехе
4. Сформировать единое видение проекта ARRURRU
5. Снять барьеры в коммуникации

## Программа

### 10:00-11:00 — Знакомство и ледоколы
- Представление каждого участника
- Игра "Две правды и одна ложь"
- Упражнение "Моя роль в ARRURRU"
- Формирование малых групп (микс отделов)

### 11:00-12:30 — Командные упражнения
- "Слепой художник" (коммуникация в паре)
- "Построй башню" (работа в группе с ограничениями)
- "Узел доверия" (физический контакт, доверие)
- Обсуждение: что помогало, что мешало

### 12:30-13:00 — Перерыв
- Лёгкие закуски
- Неформальное общение
- Энергетик (кофе/чай)

### 13:00-14:30 — Практика коммуникации
- Ролевые игры: конфликты и их решение
- "Телефон испорчен" (точность передачи информации)
- "Мозговой штурм": улучшение сервиса
- Создание командных правил

### 14:30-15:00 — Подведение итогов
- Рефлексия: что узнали о себе и коллегах
- Формулировка командных ценностей
- Общее фото команды
- Объявление домашнего задания

## Домашнее задание
1. Написать 3 идеи по улучшению работы команды
2. Назвать 3 сильные стороны любого коллеги
3. Подумать над личной целью на 3 месяца

## Результаты
После тренинга команда должна:
- Знать имена и роли всех коллег
- Понимать важность каждой позиции
- Чувствовать поддержку команды
- Хотеть работать вместе`,
      orderIndex: 1,
      files: [
        {
          name: 'Командообразование',
          url: 'https://cdn.poehali.dev/projects/a0f1d64c-d8ab-4496-af89-52912fc87ab2/files/cd7321bc-5c60-4e85-ace6-7754a13ea3a1.jpg',
          type: 'image'
        }
      ],
      hasExam: false,
      createdAt: new Date().toISOString(),
      updatedAt: new Date().toISOString()
    },
    {
      id: '10',
      section: 'trainings',
      title: 'Этап 2: Опросы и интервью (2 дня, только управляющий)',
      slug: 'training-2-research',
      content: `# Этап 2: Опросы и интервью

## Формат
- **Длительность**: 2 дня
- **Участники**: Только управляющий
- **Цель**: Сбор обратной связи от команды и гостей

## День 1: Внутренние интервью

### Утро (09:00-13:00): Индивидуальные беседы с персоналом
**Время на человека**: 30-40 минут

**Структура интервью**:
1. Как ты себя чувствуешь в команде? (эмоциональное состояние)
2. Что тебе нравится в работе? (сильные стороны)
3. С какими сложностями сталкиваешься? (проблемные зоны)
4. Что бы ты изменил в работе зала/кухни? (идеи улучшений)
5. Как оцениваешь атмосферу в коллективе? (командная динамика)
6. Какие навыки хочешь развить? (потребности в обучении)

**Правила проведения**:
- Конфиденциальность
- Без осуждения и критики
- Активное слушание
- Фиксация всех идей

### День (14:00-18:00): Обработка данных
- Систематизация ответов
- Выявление паттернов
- Определение "болевых точек"
- Формирование гипотез решений

## День 2: Внешняя обратная связь

### Утро (10:00-14:00): Наблюдение за гостями
**Методы**:
- Незаметное наблюдение за поведением
- Отслеживание эмоций (улыбки, недовольство)
- Фиксация времени обслуживания
- Замер конверсии допродаж

### День (15:00-20:00): Опрос гостей
**Форматы**:
1. Короткие опросы после еды (2-3 вопроса)
2. Развёрнутые интервью с постоянными гостями (10-15 минут)
3. Сбор онлайн-отзывов

**Ключевые вопросы**:
- Что вам больше всего понравилось?
- Что можно улучшить?
- Вернётесь ли вы к нам снова?
- Что для вас важно в сервисе?

## Анализ и выводы

### Систематизация данных
- Группировка по темам (сервис, кухня, атмосфера)
- Выявление повторяющихся проблем
- Определение зон роста
- Приоритизация изменений

### Создание плана действий
1. Срочные изменения (внедрить за неделю)
2. Среднесрочные задачи (1 месяц)
3. Долгосрочные проекты (3 месяца)

### Подготовка к следующему этапу
- Формирование программы профессионального тренинга
- Определение фокусных навыков
- Планирование практических занятий

## Итоговый отчёт
**Документ должен содержать**:
- Сводка интервью с персоналом
- Анализ обратной связи гостей
- Топ-5 проблем для решения
- Топ-5 сильных сторон для усиления
- План внедрения изменений`,
      orderIndex: 2,
      files: [],
      hasExam: false,
      createdAt: new Date().toISOString(),
      updatedAt: new Date().toISOString()
    },
    {
      id: '11',
      section: 'trainings',
      title: 'Этап 3: Профессиональный тренинг (только зал)',
      slug: 'training-3-professional',
      content: `# Этап 3: Профессиональный тренинг

## Формат
- **Длительность**: 1 полный день
- **Участники**: Только персонал зала (официанты, хостес, бармены)
- **Место**: Ресторан в нерабочее время
- **Тренер**: Управляющий + приглашённый эксперт

## Цели тренинга
1. Отработать стандарты сервиса на практике
2. Освоить техники продаж
3. Научиться работать со сложными гостями
4. Синхронизировать работу команды зала

## Программа

### 10:00-11:30 — Стандарты обслуживания
**Теория (30 минут)**:
- 6 этапов обслуживания гостя
- Правила сервировки
- Стандарты подачи блюд и напитков

**Практика (60 минут)**:
- Ролевые игры в парах
- Отработка встречи гостя
- Правильная сервировка стола на время
- Подача блюд с комментариями

### 11:30-13:00 — Техники продаж
**Теория (30 минут)**:
- Upselling и Cross-selling
- Язык выгод
- Работа с возражениями

**Практика (60 минут)**:
- Симуляция заказа (в тройках)
- Конкурс: кто соберёт больший чек
- Разбор удачных и неудачных попыток
- Создание личных скриптов продаж

### 13:00-14:00 — Обед и обсуждение
- Неформальное общение
- Обмен опытом
- Вопросы тренеру

### 14:00-15:30 — Сложные ситуации
**Сценарии**:
1. Гость недоволен блюдом
2. Гость требует скидку
3. Гость спешит, а кухня задерживает заказ
4. Конфликт между гостями
5. Гость в нетрезвом состоянии

**Формат**:
- Разыгрывание ситуаций по ролям
- Обсуждение вариантов решения
- Выработка алгоритмов действий
- Фиксация в памятках

### 15:30-17:00 — Командная синхронизация
**Упражнения**:
- "Идеальная смена" (симуляция рабочего дня)
- Координация при полной посадке
- Взаимопомощь в цейтноте
- Передача столов между сменами

**Практика**:
- Разделение на команды
- Обслуживание "гостей" (коллеги из кухни)
- Видеосъёмка и разбор
- Работа над ошибками

### 17:00-18:00 — Закрепление и экзамен
**Финальная симуляция**:
- Каждый проходит через полный цикл обслуживания
- Тренер в роли гостя со "сложностями"
- Оценка по чек-листу
- Обратная связь от тренера

## Материалы тренинга
1. Памятка "6 этапов обслуживания"
2. Скрипты продаж (шаблоны)
3. Алгоритмы работы со сложными ситуациями
4. Чек-лист сервировки
5. Видеозаписи лучших практик

## Домашнее задание
1. Отработать скрипты продаж (записать голос)
2. Провести самоанализ последней смены
3. Подготовить 3 вопроса к следующему тренингу`,
      orderIndex: 3,
      files: [
        {
          name: 'Обучение стандартам сервиса',
          url: 'https://cdn.poehali.dev/projects/a0f1d64c-d8ab-4496-af89-52912fc87ab2/files/527cd81b-b845-4348-9897-17aa1bbef94e.jpg',
          type: 'image'
        },
        {
          name: 'Интерьер зала',
          url: 'https://cdn.poehali.dev/projects/a0f1d64c-d8ab-4496-af89-52912fc87ab2/files/77d1d8db-a8db-4fc7-879f-97a47ee5ceb4.jpg',
          type: 'image'
        }
      ],
      hasExam: false,
      createdAt: new Date().toISOString(),
      updatedAt: new Date().toISOString()
    },
    {
      id: '12',
      section: 'trainings',
      title: 'Этап 4: Прикладной тренинг (только зал)',
      slug: 'training-4-applied',
      content: `# Этап 4: Прикладной тренинг

## Формат
- **Длительность**: 1 полный день
- **Участники**: Персонал зала
- **Место**: Ресторан + выездная часть
- **Фокус**: Применение знаний в реальных условиях

## Цели тренинга
1. Закрепить навыки на практике
2. Отработать нестандартные ситуации
3. Развить креативность в сервисе
4. Научиться создавать WOW-эффект

## Программа

### 10:00-12:00 — Винный этикет
**С приглашённым сомелье**:
- Основы винной карты
- Правила подачи вина
- Food pairing (сочетание еды и вина)
- Дегустация 5 основных вин меню
- Создание рекомендаций для гостей

**Практика**:
- Откр правильное открытие бутылки
- Дегустационная подача
- Разливка по бокалам
- Сторителлинг о вине

### 12:00-13:30 — Знание меню
**Глубокое погружение**:
- Дегустация всех блюд из меню
- Разбор состава каждого блюда
- Истории создания фирменных позиций
- Аллергены и ограничения

**Задание**:
- Описать 5 блюд эмоциональным языком
- Создать пары блюд + напитков
- Подготовить короткие "истории" для гостей

### 13:30-14:30 — Обед
- Сервис друг для друга
- Практика рекомендаций
- Дружеская атмосфера

### 14:30-16:00 — Психология гостя
**Интерактивная сессия**:
- Язык тела: как читать гостя
- Типы личности и подход к каждому
- Эмоциональный интеллект
- Создание эмоциональной связи

**Упражнения**:
- "Угадай настроение" (по фото)
- Симуляция: подстройка под разные типы
- Практика эмпатичного слушания

### 16:00-17:30 — WOW-сервис
**Создание незабываемого опыта**:
- Что такое WOW-момент
- Примеры из мировой практики
- Персонализация сервиса
- Мелочи, которые запоминаются

**Мозговой штурм**:
- Как удивить постоянного гостя
- Как сделать день рождения особенным
- Как превратить негатив в позитив
- Создание банка WOW-идей для ARRURRU

### 17:30-18:30 — Итоговая аттестация
**Финальный экзамен**:
1. **Теория** (письменный тест):
   - Стандарты обслуживания
   - Знание меню и винной карты
   - Техники продаж
   
2. **Практика** (ролевая игра):
   - Полный цикл обслуживания
   - Работа со сложной ситуацией
   - Создание WOW-момента

3. **Обратная связь**:
   - От тренера
   - От коллег
   - Самооценка

## Выдаваемые материалы
1. Сертификат прохождения тренинга
2. Памятка по винам
3. Книга меню с описаниями
4. Банк WOW-идей
5. Личный план развития

## Критерии успешного прохождения
- Теория: минимум 80%
- Практика: соответствие всем стандартам
- Оценка от гостя-актёра: 4.5+ из 5
- Активное участие во всех этапах`,
      orderIndex: 4,
      files: [],
      hasExam: false,
      createdAt: new Date().toISOString(),
      updatedAt: new Date().toISOString()
    },
    {
      id: '13',
      section: 'trainings',
      title: 'Этап 5: Результаты и работа управляющего',
      slug: 'training-5-results',
      content: `# Этап 5: Результаты и работа управляющего

## Формат
- **Длительность**: Непрерывный процесс
- **Ответственный**: Управляющий
- **Цель**: Закрепление результатов и постоянное улучшение

## Неделя 1-2: Внедрение изменений

### Ежедневные действия управляющего
**Утро (до открытия)**:
- Планёрка с командой (15 минут)
- Напоминание о стандартах
- Мотивационный настрой
- Распределение зон ответственности

**Во время смены**:
- Наблюдение за работой персонала
- Оперативная обратная связь
- Коррекция ошибок на месте
- Поддержка в сложных ситуациях
- Хвалить публично, критиковать наедине

**После смены**:
- Дебрифинг (10-15 минут)
- Что получилось, что нет
- Разбор критических ситуаций
- План на завтра

### Мониторинг показателей
**Ежедневно отслеживать**:
- Средний чек
- Время обслуживания
- Отзывы гостей
- Конверсия допродаж
- Возвраты блюд

**Еженедельно**:
- Сводный отчёт по показателям
- Динамика изменений
- Лучший сотрудник недели
- Зоны для улучшения

## Неделя 3-4: Закрепление навыков

### Индивидуальная работа
**С каждым сотрудником**:
- Персональная обратная связь (1 раз в неделю)
- Оценка прогресса
- Работа над слабыми сторонами
- Постановка целей на неделю

### Групповые активности
**Командные встречи** (1 раз в неделю):
- Разбор кейсов из практики
- Обмен лучшими практиками
- Мини-тренинги по запросу
- Командные челленджи

## Месяц 2-3: Развитие культуры

### Система мотивации
**Внедрить**:
- Доска достижений
- Сотрудник месяца
- Бонусы за допродажи
- Отзывы гостей с именами официантов
- Внутренние конкурсы

### Постоянное обучение
**Форматы**:
- Утренние 5-минутки (новое блюдо, техника)
- Еженедельные воркшопы
- Обмен опытом между сотрудниками
- Приглашённые эксперты (1 раз в месяц)

### Культура обратной связи
- Персонал может давать идеи
- Анонимный ящик предложений
- Ежемесячные встречи "без галстуков"
- Реализация лучших идей

## Аналитика и корректировка

### Ежемесячный анализ
**Показатели эффективности**:
- Рост среднего чека (%)
- Увеличение выручки (%)
- Рост повторных визитов (%)
- Улучшение отзывов (рейтинг)
- Снижение возвратов блюд (%)

**Качественные показатели**:
- Атмосфера в команде
- Удовлетворённость персонала
- Уровень стресса
- Текучка кадров

### Корректировка стратегии
**Если результаты не достигнуты**:
1. Анализ причин
2. Дополнительное обучение
3. Изменение подходов
4. Персональная работа

**Если результаты превзошли ожидания**:
1. Фиксация успешных практик
2. Масштабирование на всех
3. Повышение планок
4. Новые вызовы для команды

## Долгосрочное развитие

### Квартальные тренинги
- Обновление знаний
- Новые техники и тренды
- Продвинутые навыки
- Развитие лидерских качеств

### Карьерный рост
- Путь развития для каждого сотрудника
- Программа наставничества
- Возможность роста до старшего официанта/управляющего
- Участие в открытии новых проектов

## Чек-лист для управляющего

**Ежедневно**:
- [ ] Утренняя планёрка
- [ ] Наблюдение за сменой
- [ ] Обратная связь команде
- [ ] Вечерний дебрифинг
- [ ] Фиксация показателей

**Еженедельно**:
- [ ] Индивидуальные встречи
- [ ] Групповое обучение
- [ ] Анализ показателей
- [ ] Корректировка планов

**Ежемесячно**:
- [ ] Глубокий анализ результатов
- [ ] Награждение лучших
- [ ] Планирование на следующий месяц
- [ ] Встреча с владельцем/директором`,
      orderIndex: 5,
      files: [],
      hasExam: false,
      createdAt: new Date().toISOString(),
      updatedAt: new Date().toISOString()
    },
    {
      id: '6',
      section: 'standards',
      title: 'Стандарты внешнего вида',
      slug: 'appearance-standards',
      content: `# Стандарты внешнего вида

## Униформа
- Чёрная рубашка/блузка (предоставляется рестораном)
- Чёрные брюки/юбка (классический крой)
- Чёрная закрытая обувь (кожаная, без каблука выше 5 см)

## Причёска
- Волосы чистые, уложенные
- Длинные волосы собраны
- Никаких ярких цветов

## Аксессуары
- Минимальные украшения
- Только классические часы
- Запрещены: большие серьги, браслеты, кольца (кроме обручальных)

## Гигиена
- Чистые руки, ухоженные ногти
- Нейтральный макияж
- Лёгкий или нейтральный парфюм`,
      orderIndex: 1,
      files: [],
      createdAt: new Date().toISOString(),
      updatedAt: new Date().toISOString()
    }
  ];
};

export const loadContent = (): ContentPage[] => {
  const stored = localStorage.getItem(STORAGE_KEY);
  if (stored) {
    try {
      return JSON.parse(stored);
    } catch {
      return getInitialContent();
    }
  }
  const initial = getInitialContent();
  localStorage.setItem(STORAGE_KEY, JSON.stringify(initial));
  return initial;
};

export const getContentBySection = (section: string): ContentPage[] => {
  const allContent = loadContent();
  return allContent.filter(page => page.section === section).sort((a, b) => a.orderIndex - b.orderIndex);
};

export const getContentBySlug = (slug: string): ContentPage | undefined => {
  const allContent = loadContent();
  return allContent.find(page => page.slug === slug);
};

export const saveContent = (page: Partial<ContentPage> & { section: ContentPage['section']; title: string; slug: string }): ContentPage => {
  const allContent = loadContent();
  
  const newPage: ContentPage = {
    id: page.id || crypto.randomUUID(),
    section: page.section,
    title: page.title,
    slug: page.slug,
    content: page.content || '',
    parentId: page.parentId,
    orderIndex: page.orderIndex || allContent.filter(p => p.section === page.section).length + 1,
    files: page.files || [],
    createdAt: page.id ? (allContent.find(p => p.id === page.id)?.createdAt || new Date().toISOString()) : new Date().toISOString(),
    updatedAt: new Date().toISOString()
  };
  
  if (page.id) {
    const index = allContent.findIndex(p => p.id === page.id);
    if (index >= 0) {
      allContent[index] = newPage;
    } else {
      allContent.push(newPage);
    }
  } else {
    allContent.push(newPage);
  }
  
  localStorage.setItem(STORAGE_KEY, JSON.stringify(allContent));
  return newPage;
};

export const deleteContent = (id: string): boolean => {
  const allContent = loadContent();
  const filtered = allContent.filter(page => page.id !== id);
  
  if (filtered.length < allContent.length) {
    localStorage.setItem(STORAGE_KEY, JSON.stringify(filtered));
    return true;
  }
  return false;
};

export const getUserProgress = (userId: string): UserProgress[] => {
  const stored = localStorage.getItem(PROGRESS_KEY);
  if (!stored) return [];
  try {
    const allProgress = JSON.parse(stored) as UserProgress[];
    return allProgress.filter(p => p.userId === userId);
  } catch {
    return [];
  }
};

export const saveUserProgress = (progress: UserProgress): void => {
  const stored = localStorage.getItem(PROGRESS_KEY);
  let allProgress: UserProgress[] = [];
  
  if (stored) {
    try {
      allProgress = JSON.parse(stored);
    } catch {
      allProgress = [];
    }
  }
  
  const existingIndex = allProgress.findIndex(
    p => p.userId === progress.userId && p.contentId === progress.contentId
  );
  
  if (existingIndex >= 0) {
    allProgress[existingIndex] = progress;
  } else {
    allProgress.push(progress);
  }
  
  localStorage.setItem(PROGRESS_KEY, JSON.stringify(allProgress));
};

export const saveExamResult = (result: ExamResult): void => {
  const stored = localStorage.getItem(EXAM_RESULTS_KEY);
  let allResults: ExamResult[] = [];
  
  if (stored) {
    try {
      allResults = JSON.parse(stored);
    } catch {
      allResults = [];
    }
  }
  
  allResults.push(result);
  localStorage.setItem(EXAM_RESULTS_KEY, JSON.stringify(allResults));
};

export const getExamResults = (userId?: string): ExamResult[] => {
  const stored = localStorage.getItem(EXAM_RESULTS_KEY);
  if (!stored) return [];
  
  try {
    const allResults = JSON.parse(stored) as ExamResult[];
    return userId ? allResults.filter(r => r.userId === userId) : allResults;
  } catch {
    return [];
  }
};

export const getAllProgress = (): UserProgress[] => {
  const stored = localStorage.getItem(PROGRESS_KEY);
  if (!stored) return [];
  try {
    return JSON.parse(stored);
  } catch {
    return [];
  }
};